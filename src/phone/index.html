<!DOCTYPE HTML>
<html>
	<head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <!--jquery-->
        <script src=jquery/jquery-1.11.3.min.js></script>
        <!-- jquery mobile-->        
		<link rel=stylesheet href=jquery-mobile/css/jquery.mobile-1.4.5.css>
		<script src=jquery-mobile/js/jquery.mobile-1.4.5.js></script>
        <!--highcharts-->
		<script src=hightcharts/highcharts.js></script>
		<script src=hightcharts/modules/exporting.js></script>
        <!-- Scrollz -->
        <link rel=stylesheet href=jquery-scrollz/jquery.scrollz.css>
        <script src=jquery-scrollz/jquery.scrollz.min.js></script>
		<script type="text/javascript">
            // Next page index loaded
            var nextPageIndex = 0;
            
            // Indicates if new entries loading is in progress
            var loading = false;
        
            // Load more function        
            function loadMore() {
                
                if (!loading) {
                
                    loading = true;
                    protocol = document.location.protocol == 'file:' ? 'http:' : document.location.protocol;
                    //url = 'http://svntesting.sinaapp.com/';
                    url = 'http://zippy1978.tumblr.com/rss';
                    $.ajax({
                    type: "GET",
                    url: protocol + '//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=1000&callback=?&q=' + encodeURIComponent(url),
                    //url: protocol + encodeURIComponent(url),
                    dataType: 'json',
                    error: function(){
                        loading = false;
                    },
                    success: function(xml){
                        
                        var targetList = $('#items');
                        
                        values = xml.responseData.feed.entries;
                        
                        // First page
                        if (nextPageIndex == 0) {
                            targetList.empty();
                        }

                        $.each(values, function() {
                            targetList.append('<li><img class="ui-li-icon" src="https://lh5.googleusercontent.com/-T4SN-W1_Gkk/AAAAAAAAAAI/AAAAAAAAAv0/xRQBInxIzJo/s120-c/photo.jpg"/><h3 class="wrapping-new-line"><a href="' + this.link + '">' + this.title + '</a></h3><p class="wrapping-new-line">' + this.contentSnippet + '<a href="' + this.link + '">read more</a></p><p class="date">' + this.publishedDate + '</p></li>');
                        });

                        targetList.listview("refresh");

                        // Hide pull header after first page is loaded
                        if (nextPageIndex == 0) {
                            $('#container').scrollz('hidePullHeader');
                        }
                        
                        nextPageIndex++;
                        loading = false;
                    }
                });
            
                }
                
            }

            // Load initial items
            loadMore();         

            $(document).on('pulled', '#container', function() {
                 // Reset page index
                nextPageIndex = 0;
                
                // Reload
                loadMore();
            });

$(function () {
    $('#container').highcharts({
        chart: {
            type: 'bar'
        },
        title: {
            text: '本周热点图书'
        },
        subtitle: {
            text: 'in this week'
        },
        xAxis: {
            categories: ['Books'], //'Lover', 'Rebel of Robots', 'Story', 'Element of Styles'],
            title: {
                text: null
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Tags by members',
                align: 'high'
            },
            labels: {
                overflow: 'justify'
            }
        },
        tooltip: {
            valueSuffix: ' millions'
        },
        plotOptions: {
            bar: {
                dataLabels: {
                    enabled: true
                }
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 230,
            floating: true,
            borderWidth: 1,
	        backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
            shadow: true
        },
        credits: {
            enabled: false
        },
        series: [{
            name: 'Lovers',
            data: [107]
        }, {
            name: 'Robots Rebel',
            data: [133]
        }, {
            name: 'Elements of Styels',
            data: [97]
	    }, {
	    name: 'Story',
	    data: [200]
	    }]
    });
});



</script>
</head>

<body>

<div id="container"  data-role="content" data-scrollz="pull" style="min-width: 310px; max-width: 800px; height: 400px; margin: 0 auto">

</div>
</body>
</html>
